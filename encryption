import json
from cryptography.fernet import Fernet

# Create a dictionary with key-value pairs
dictionary = {"name": "Pawan", "age": 40, "city": "Preston"}

# Convert dictionary to JSON
json_dict = json.dumps(dictionary)

# Generate a secret key for encryption (keep this secret)
secret_key = Fernet.generate_key()

# Initialize the Fernet cipher with the secret key
cipher_suite = Fernet(secret_key)

# Encrypt the JSON data
encrypted_data = cipher_suite.encrypt(json_dict.encode())

# Save the encrypted data to a file
with open('encrypted_data.json', 'wb') as file:
    file.write(encrypted_data)

# Print the secret key (keep this secret for decryption)
#print("Secret Key:", secret_key)

# Read the encrypted data from the file
with open('encrypted_data.json', 'rb') as file:
    encrypted_data = file.read()

# Add the key you generated to start decrypting the file
secret_key = Fernet(secret_key)

# Initialize the Fernet cipher with the secret key
cipher_suite = Fernet(secret_key)

# Decrypt the data
decrypted_data = cipher_suite.decrypt(encrypted_data)

# Convert the JSON data back to a dictionary
dictionary = json.loads(decrypted_data.decode())

# Print the decrypted dictionary
print(dictionary)
